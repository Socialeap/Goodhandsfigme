"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[9912],{35424:(e,t,r)=>{r.d(t,{q:()=>y});var n=r(45992),i=r(37577),o=r(94310),s=r(54463),l=r(17588),d=r(34968);const a="DM Sans";(0,r(26558).PY)(a,"https://fonts.gstatic.com/s/dmsans/v17/rP2Yp2ywxg089UriI5-g4vlH9VoD8Cmcqbu0-K6z9mXg.woff2");const c=i.Ay.div({display:"flex",alignItems:"center",width:"100%",height:"100%"}),g=i.Ay.div.attrs((e=>{let{theme:{color:t},$darkMode:r=!1,$backgroundColor:n}=e;return{style:{backgroundColor:r?n||"rgb(75, 73, 86)":n||t.background.primary.active()}}}))({position:"relative",display:"flex",flex:1,height:"100%",borderRadius:"99999999999px",overflow:"hidden"}),u=e=>{let{color:t,$darkMode:r,$textColor:n,$isTextInside:i}=e;return n||(i?r?"rgb(75, 73, 86)":t.content.reversed.default():r?t.content.reversed.default():t.content.primary.default())},f=i.Ay.div({display:"flex",alignItems:"center",justifyContent:"center",height:"100%",transform:"translateY(-50%)"}),h=i.Ay.span.attrs((e=>{let{theme:{color:t},$darkMode:r=!1,$isTextInside:n=!1,$textColor:i}=e;var o;return{style:{color:null!==(o=u({color:t,$darkMode:r,$textColor:i,$isTextInside:n}))&&void 0!==o?o:"white"}}}))(Object.assign({fontSize:"calc(var(--parent-height) / 2.5 * 1px)",fontFamily:`'${a}', "Source Sans Pro", _fb_`,fontWeight:600,textAlign:"center"},d.iF.mixins.increaseSpecificity({padding:"0 calc(var(--parent-height) / 5 * 1px)"}))),m=i.Ay.div.attrs((e=>{let{theme:{color:t},$darkMode:r=!1,$barColor:n,$progress:i}=e;return{style:{backgroundColor:r?n||t.content.reversed.default():n||t.content.primary.default(),transform:`translateX(-${100-i}%)`}}}))({position:"relative",width:"100%",height:"100%",borderRadius:"99999999999px",transition:"transform 0.3s ease-in-out",[f]:{position:"absolute",top:"50%"}}),p=(0,l.forwardRef)(((e,t)=>{let{darkMode:r,progress:i,showPercentage:o,styles:s,size:d}=e;const[a,u]=(0,l.useState)(null),[p,C]=(0,l.useState)(null),[v,S]=(0,l.useState)(!1),[y,x]=(0,l.useState)(0),b=Math.round(Math.min(100,Math.max(0,i)));return(0,l.useLayoutEffect)((()=>{if(!o||!a||!p)return;const e=()=>{const e=a.offsetWidth,t=p.offsetWidth,r=t-t*b/100;x(e),S(e>r)};e();const t=new ResizeObserver(e);return t.observe(p),()=>t.disconnect()}),[b,o,a,p]),(0,n.jsx)(c,{ref:t,style:{"--parent-height":d.height},children:(0,n.jsx)(g,{ref:C,$darkMode:r,$backgroundColor:s.backgroundColor,children:(0,n.jsx)(m,{$progress:b,$darkMode:r,$barColor:s.barColor,children:o&&(0,n.jsx)(f,{style:{right:v?"0%":`calc(-${y}px)`},children:(0,n.jsxs)(h,{ref:u,$darkMode:r,$textColor:s.textColor,$isTextInside:v,children:[b,"%"]})})})})})})),C=(0,l.forwardRef)(((e,t)=>{let{progress:r,showPercentage:i,styles:o,size:s}=e;return(0,n.jsx)(p,{darkMode:!0,progress:r,ref:t,showPercentage:i,size:s,styles:o})})),v=(0,l.forwardRef)(((e,t)=>{let{progress:r,showPercentage:i,styles:o,size:s}=e;return(0,n.jsx)(p,{darkMode:!1,progress:r,ref:t,showPercentage:i,size:s,styles:o})})),S=e=>{let{progress:t,showPercentage:r,styles:i,variant:l}=e;const{ref:d,size:a}=(0,o.r)(),c=(e=>{switch(e){case s._.MINIMAL_LIGHT:return v;case s._.MINIMAL_DARK:return C;default:return()=>(0,n.jsx)("h1",{children:"\u23f0 WIP-ing progress bar"})}})(l);return(0,n.jsx)(c,{progress:t,ref:d,showPercentage:r,size:a,styles:i})},y=e=>{let{backgroundColor:t,barColor:r,progress:o,showPercentage:s,textColor:l,theme:d,variant:a}=e;const c={backgroundColor:""===t?void 0:t,barColor:""===r?void 0:r,textColor:""===l?void 0:l};return(0,n.jsx)(i.NP,{theme:d,children:(0,n.jsx)(S,{progress:o,showPercentage:s,styles:c,variant:a})})}},89912:(e,t,r)=>{r.r(t),r.d(t,{progressBarEditorScript:()=>d});var n=r(45992),i=r(57277),o=r(35424),s=r(76599),l=r(75971);const d=e=>{let{script:t,editor:r}=e;const d=t.item;if(d){if(r.justCreated){const e=t.getConfig();if(d.parentSlide.isPopup)t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=[d.parentSlide.id]}));else{const n=e.slidesToDisplay.selectedSlides.filter((e=>r.getNonPopupSlides().some((t=>t.id===e))));0===n.length?t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=r.getNonPopupSlides().map((e=>{let{id:t}=e;return t}))})):t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=n}))}}r.on("slideCreated",(e=>{let{slide:n}=e;const i=n.parentSlide;if(!d.isTransversal||i)return;const o=t.getConfig().slidesToDisplay.selectedSlides,s=r.getNonPopupSlides().map((e=>{let{id:t}=e;return t})).filter((e=>e!==n.id));o.length===s.length&&t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=[...o,n.id]}))})),r.on("slideDeleted",(e=>{let{slide:r}=e;const n=r.parentSlide;if(!d.isTransversal||n)return;const i=t.getConfig().slidesToDisplay.selectedSlides;i.some((e=>e===r.id))&&t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=i.filter((e=>e!==r.id))}))})),t.on("configChange",(e=>{let{config:n,prevConfig:i}=e;var o;const s=t.item;if(!s||!s.exists)return;(e=>{e.thumbnail&&(e.thumbnail=void 0)})(s);const d=n.slidesToDisplay.selectedSlides;s.includedSlideIds=[...d],s.isTransversal=!0,d.length>0&&!d.includes(s.parentSlide.id)&&r.moveCurrentItemToSlide(d[0]);const a=s.parentSlide.isPopup||Boolean(s.parentItem);t.mutateConfig((e=>{e.showSlideSelector=!a})),i&&d.length!==i.slidesToDisplay.selectedSlides.length&&(null===(o=r.trackWidgetConfigChange)||void 0===o||o.call(r,"slideSelector",{selectedSlideIds:d,elementName:l.m.scriptId}))})),(0,i.x)({getTargetNodeItem:()=>t.item,renderApp:()=>{const{showPercentage:e,barColor:i,backgroundColor:l,textColor:d,variant:a}=t.getConfig(),c=t.item,g=(0,s.w)({allSlideIds:r.getNonPopupSlides().map((e=>e.id)),includedSlideIds:c.includedSlideIds||[],currentSlideId:r.getCurrentSlide().id});return(0,n.jsx)(o.q,{backgroundColor:l,barColor:i,progress:g,showPercentage:e,textColor:d,theme:r.theme,variant:a})},renderThumbnailApp:function(){let{renderingSlideId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{showPercentage:i,barColor:l,backgroundColor:d,textColor:a,variant:c}=t.getConfig(),g=t.item,u=(0,s.w)({allSlideIds:r.getNonPopupSlides().map((e=>e.id)),includedSlideIds:g.includedSlideIds||[],currentSlideId:e||r.getCurrentSlide().id});return(0,n.jsx)(o.q,{backgroundColor:d,barColor:l,progress:u,showPercentage:i,textColor:a,theme:r.theme,variant:c})},nodePrefix:"progress-bar"})({script:t,editor:r})}}},76599:(e,t,r)=>{r.d(t,{w:()=>n});const n=e=>{let{allSlideIds:t,includedSlideIds:r,currentSlideId:n}=e;if(r.length<=1)return 0;const i=t.filter((e=>r.includes(e))),o=i.indexOf(n);return-1===o?0:o/(i.length-1)*100}},94310:(e,t,r)=>{r.d(t,{r:()=>i});var n=r(17588);const i=()=>{const[e,t]=(0,n.useState)({width:0,height:0}),r=(0,n.useRef)(null);return{ref:(0,n.useCallback)((e=>{if(r.current&&r.current.disconnect(),!e)return;const{width:n,height:i}=e.getBoundingClientRect();t({width:n,height:i}),r.current=new ResizeObserver((e=>{const{contentRect:r}=e[0];t({width:r.width,height:r.height})})),r.current.observe(e)}),[]),size:e}}},57277:(e,t,r)=>{r.d(t,{x:()=>i});var n=r(70377);function i(e){let{getTargetNodeItem:t,renderApp:r,renderThumbnailApp:i,nodePrefix:o}=e;return e=>{let{script:s,editor:l}=e,d=null,a=[];function c(e){d&&(n.unmountComponentAtNode(d),d=null),e&&"innerHtml"in e&&(e.innerHtml='<div class="card-iframe"><div style="width: 100%; height: 100%; background: #FF0000; color: #FFFFFF;">Deleted</div><script><\/script></div>')}function g(){d&&n.render(r(),d)}function u(){const e=t(s.getConfig());if(!e)return;const r=`${o}-${e.id}`;"innerHtml"in e&&(e.innerHtml=`<div class="card-iframe"><div id="${r}" class="genially-widget-app" style="width: 100%; height: 100%;"></div></div>`),requestAnimationFrame((()=>{d="idOfFreeNode"in e?document.getElementById(e.idOfFreeNode)||null:document.getElementById(r)||null,g()}))}function f(){i&&a.length&&a.forEach((e=>{const t="true"===e.dataset.critical,{renderingSlideId:r}=e.dataset;n.render(i({important:t,renderingSlideId:r}),e)}))}function h(){const e=t(s.getConfig());e&&"idOfThumbnailFreeNode"in e&&requestAnimationFrame((()=>{const t=document.getElementsByClassName(e.idOfThumbnailFreeNode);a=Array.from(t).filter((e=>e instanceof HTMLElement)),f()}))}s.on("configChange",(e=>{let{config:r,prevConfig:n}=e;const i=t(r),o=n?t(n):void 0;o&&o!==i&&c(o),i&&(i!==o?(u(),h()):(g(),f()))})),s.on("dispose",(()=>{c(t(s.getConfig()))})),l.on("itemMount",(e=>{let{item:t}=e;t===s.item&&u()})),l.on("slideChange",(()=>{g()})),l.on("itemUnmount",(e=>{let{item:t}=e;t===s.item&&c()})),l.on("itemThumbnailMount",(e=>{let{item:t}=e;t===s.item&&h()}))}}},26558:(e,t,r)=>{r.d(t,{PY:()=>o,Sx:()=>i,qP:()=>n});const n=e=>{const t=new Image;return t.crossOrigin="anonymous",t.src=e,t},i=e=>new Promise((t=>{const r=new Image;r.crossOrigin="anonymous",r.onload=t,r.src=e})),o=(e,t)=>{try{if(!!document.fonts&&Array.from(document.fonts).some((t=>t.family===e)))return;new FontFace(e,`url(${t})`).load().then((e=>{document.fonts.add(e)}))}catch(r){console.warn("Error preloading font",r)}}}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/9912.f777536f.chunk.js.map